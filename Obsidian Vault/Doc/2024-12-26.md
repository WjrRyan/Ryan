# 短视频评论回复功能 PRD

## 1. 背景与目标
随着短视频平台的用户互动需求不断增长，评论区已成为用户交流的重要场所。为提升平台的互动性和用户体验，决定在评论区中添加**评论回复**功能。该功能将允许用户对其他用户的评论进行回复，增强社区互动，提升用户参与感。

## 2. 目标
- 提供一个便捷的回复评论的机制。
- 增强用户互动性，提升社区氛围。
- 支持评论嵌套，用户可以清晰看到谁回复了谁。

## 3. 功能需求

### 3.1 基本功能
- **回复按钮**：每条评论下方将添加“回复”按钮，点击后弹出输入框，用户可以输入自己的回复内容。
- **嵌套展示**：回复内容将展示为嵌套评论，回复将出现在原评论下方，并以缩进方式显示。
- **评论/回复区分**：评论和回复需进行视觉区分，回复内容需要标明是某个用户对特定评论的回复，形式为“@用户名”。
- **最多支持层级**：回复功能支持最多3层嵌套，超过3层则以“展开更多”方式展示。

### 3.2 用户体验
- **实时显示**：用户提交回复后，回复内容需要立即显示在评论区，不需要刷新页面。
- **通知功能**：当某条评论收到回复时，原评论用户将收到一条通知。
- **评论/回复点赞**：每条评论和回复可以点赞，点赞数显示在评论区下方。

### 3.3 管理员功能
- **删除评论/回复**：管理员可以删除任何评论或回复，删除操作将不会影响其他评论。
- **屏蔽用户**：管理员可以屏蔽特定用户的评论和回复，屏蔽后该用户的所有评论/回复对其他用户不可见。

### 3.4 异常处理
- **恶意内容过滤**：系统需对评论和回复进行敏感词过滤，屏蔽不当内容。
- **防止刷屏**：限制同一用户在短时间内对同一评论进行多次回复。

## 4. 用户故事
### 4.1 用户故事1 - 普通用户回复评论
**场景**：用户A看到用户B的评论，想要表达自己的观点。
- **动作**：点击用户B评论下方的“回复”按钮，输入文字并提交。
- **结果**：用户A的回复在用户B评论下方显示，其他用户可以看到并点赞该回复。

### 4.2 用户故事2 - 接收评论回复通知
**场景**：用户B收到用户A的评论回复，想要查看谁回复了自己。
- **动作**：用户B在通知中心看到回复通知，点击后进入视频页面查看评论回复内容。
- **结果**：用户B看到自己的评论下方显示了用户A的回复，并能进行互动。

### 4.3 用户故事3 - 管理员删除评论
**场景**：管理员发现某条评论带有恶意内容，需要删除。
- **动作**：管理员点击删除按钮，确认删除该评论。
- **结果**：该条评论及其回复被删除，不再显示在页面上。

## 5. 流程图

```mermaid
graph LR
A[用户点击评论下方回复按钮] --> B[输入回复内容]
B --> C[提交回复]
C --> D[显示在原评论下方，嵌套展示]
D --> E[其他用户查看或点赞回复]