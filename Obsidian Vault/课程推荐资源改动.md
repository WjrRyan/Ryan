# 课程推荐资源改动

## 用户价值

当前课程推荐资源在课程详情页，是用户主流程之一，接口数量也位居高位，我们希望从主用户流程开始，为用户带来更多价值。

这里改动的价值在于可以为用户触达多样的相关的资源。

## 功能改动

- 原有逻辑，如果有学习包优先展示学习包不变
    
- 原有逻辑，如果没有学习包从集团精选中随机选课改动，改为推荐课程
    
- 推荐课程按照相关，热度，新颖三个维度设置权重
    

---

## **PRD — 课程详情页「推荐学习资源」优化**

### **1. 背景与机会**

- **业务现状**：课程详情页右侧推荐区域日均调用 430 k 次（P99 = 128 ms），是学习路径中曝光量第二高的组件。
    
- **痛点**
    
    1. 仅在有学习包时才提供结构化推荐，其余场景随机抽取「集团精选」资源，相关性不足。
        
    2. CTR、完课率与二跳学习时长均低于全站平均（‑11 %、‑8 %、‑9 %）。
        
    
- **目标**：通过智能排序提升推荐质量，让用户在主学习流程即可发现多样、相关且新颖的资源，进而拉升学习深度。
    

### **2. 需求一览**

|**#**|**用户故事**|**Must**|**Notes**|
|---|---|---|---|
|R‑1|作为学习者，当我查看课程 A 时，系统应优先显示 **对应学习包**（若存在），方便我一键进入完整路径|✅|规则不变|
|R‑2|当课程 A 无学习包时，我希望看到与课程内容紧密相关的推荐资源，而非随机课程|✅|新召回逻辑|
|R‑3|推荐列表应综合考虑 **相关性、热度、上新**，并透明显示关联理由（标签角标）|✅|排序模型|
|R‑4|如果系统无法在 300 ms 内返回推荐，则优雅降级到 T‑1 热门榜|✅|SLA|
|R‑5|管理员可后台配置各权重 (rel/pop/fresh) 与业务加权 (主题 Boost)|⚪︎|MVP 可硬编码，M1 配置化|

---

### **3. 业务流程 & 算法概述**

flowchart LR  
U[打开课程详情] --> |有学习包| P1[展示学习包卡片] --> END  
U --> |无学习包| Recall[候选生成]  
Recall --> Filter[过滤]  
Filter --> Rank[相关性+热度+新颖 加权]  
Rank --> Diversity[多样性/业务规则]  
Diversity --> Cache[写缓存 TTL30m]  
Cache --> END[渲染卡片]  
​  
classDef primary fill:#dfefff,stroke:#5b8eff;  
class Recall,Filter,Rank,Diversity,Cache primary

**排序公式**

Score = 0.5 × Rel + 0.25 × Pop + 0.15 × Fresh + 0.10 × BizBoost